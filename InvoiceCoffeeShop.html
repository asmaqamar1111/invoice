<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>Invoice Coffee Shop</title>
    <style>
      body {
        background-image: url();
      }
      .add-btn, .del-btn, .update-btn, .edit-btn{
        background-color: #4b1919;
        color: white;
      }
      @media print {
        form {
          display: none;
        }
        button {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="container-fluid mx-auto">
      <div class="row">
        <div class="col-12 mx-auto text-center">
          <h1 style="display: inline; font-family: serif; color: #4b1919">
            COFFEE
          </h1>
          <img
            style="display: inline"
            src="178e0bf51df91c5e2568918a8135c383-removebg-preview.png"
            width="150"
          />
          <h1 style="display: inline; font-family: serif; color: #4b1919">
            PLACE
          </h1>
        </div>
      </div>
      <div class="row mx-auto">
        <div class="col-4 col-xl-4 col-lg-4 col-md-6 col-sm-10 col-10 mx-auto">
          <form class="was-validated mx-auto">
            <div class="m-3">
              <label for="formGroupExampleInput" class="fw-bold"
                >Product Name</label
              >
              <input
                list="datalistOptions"
                id="list"
                onchange="getSelectValue()"
                placeholder="Please select any one"
                class="form-select"
                required
                aria-label="select example"
                autocomplete="off"
              />
              <datalist id="datalistOptions" size="6">
                <option id="01" value="Pumpkin Spice Latte"></option>
                <option id="02" value="Red Velvet Latte"></option>
                <option id="03" value="Latte"></option>
                <option id="04" value="Spanish Latte Hot"></option>
                <option id="05" value="Spanish Latte"></option>
                <option id="06" value="Mocha Latte"></option>
              </datalist>
              <div class="invalid-feedback">Kindly select the product</div>
            </div>

            <div class="m-3">
              <label for="formGroupExampleInput" class="fw-bold">Price</label>
              <input type="number" class="form-control" id="prc" disabled />
            </div>

            <div class="m-3">
              <label for="formGroupExampleInput" class="fw-bold"
                >Quantity</label
              >
              <input
                type="number"
                id="qty"
                onchange="calculate()"
                class="form-select"
                required
              />
              <div class="invalid-feedback">Select the Quantity of product</div>
            </div>

            <div class="m-3">
              <label for="formGroupExampleInput" class="fw-bold">Amount</label>
              <input type="number" class="form-control" id="amnt" disabled />
            </div>

            <div class="m-3 mx-auto text-center">
              <button class="btn btn-warning add-btn fw-bold" type="button" onclick="addData()">
                Add Data
              </button>
            </div>
            <div class="m-3 mx-auto text-center">
              <button
                class="btn btn-warning update-btn fw-bold "
                type="button"
                onclick="updateData()"
              >
                Update Data
              </button>
            </div>
            <div class="m-3 mx-auto text-center">
              <button
                class="btn btn-warning update-btn fw-bold "
                type="button"
                onclick="window.print()"
              ><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer-fill" viewBox="0 0 16 16">
                <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
                <path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
              </svg>
                print
              </button>
            </div>
          </form>
        </div>
        <div class="col-8 col-xl-8 col-lg-8 col-md-8 col-sm-10 col-10 mx-auto">
          <table class="m-4 w-75 mx-auto  table table-hover" id="tab">
            <thead>
              <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Amount</th>
                <th>Edit</th>
                <th>Delete</th>
              </tr>
            </thead>
            <tbody id="newtr"></tbody>
            <tfoot>
              <tr>
                <td></td>
                <th>Total Amount</th>
                <td id="total"></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <th>Discount 10%</th>
                <td id="discount"></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr></tr>
              <tr>
                <td></td>
                <th>After Discount 10%</th>
                <td id="afterDiscount"></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <th>Tax 17%</th>
                <td id="tax"></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <th>Paid Amount</th>
                <td id="paid"></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
                
            </tfoot>
          </table>
        </div>
      </div>
      <!-- col-xl->=1200
      col-lg->=992
      col-md->=768
      col-sm->=576
      col->=576 -->
    </div>
    <script>
      var prod_name;
      var price;
      var quantity;
      var amount;
      var total = 0;
      var originalPrice;
      const taxRate = 0.17;
      const discount = 0.1;
      var paid = 0;
      var discountAmount;
      var priceAfterDiscount;
      var taxAmount;
      var totalAmount;

      // function disabled(){
      // let t = document.getElementById('list').value;
      // console.log(t)
      // alert("hi")
      // }

      function getSelectValue() {
        prod_name = document.getElementById("list").value;

        if (prod_name == "Pumpkin Spice Latte") {
          document.getElementById("prc").value = "440";
          document.getElementById("01").disabled = true;
        } else if (prod_name == "Red Velvet Latte") {
          document.getElementById("prc").value = "420";
          document.getElementById("02").disabled = true;
        } else if (prod_name == "Latte") {
          document.getElementById("prc").value = "360";
          document.getElementById("03").disabled = true;
        } else if (prod_name == "Spanish Latte Hot") {
          document.getElementById("prc").value = "380";
          document.getElementById("04").disabled = true;
        } else if (prod_name == "Spanish Latte") {
          document.getElementById("prc").value = "320";
          document.getElementById("05").disabled = true;
        } else if (prod_name == "Mocha Latte") {
          document.getElementById("prc").value = "400";
          document.getElementById("06").disabled = true;
        }
      }

      function addData() {
        prod_name = document.getElementById("list").value;
        price = document.getElementById("prc").value;
        quantity = document.getElementById("qty").value;
        amount = document.getElementById("amnt").value;

        document.getElementById("newtr").innerHTML +=
          "<tr>   <td>" +
          prod_name +
          "</td> <td>" +
          price +
          "</td> <td>" +
          quantity +
          "</td><td>" +
          amount +
          '</td> <td> <button type="button" class="btn btn-warning fw-bold btn-sm edit-btn" onclick="edit()" >Edit</button></td><td> ' +
          '<button type="button" class="btn btn-warning fw-bold btn-sm del-btn"  onclick="del()" > Delete </button></td> </tr> ';

        document.getElementById("list").value = "";
        document.getElementById("prc").value = "";
        document.getElementById("qty").value = "";
        document.getElementById("amnt").value = "";

        document.getElementById("total").innerHTML = parseInt(originalPrice);

        document.getElementById("discount").innerHTML =
          parseInt(discountAmount);

        document.getElementById("afterDiscount").innerHTML =
          parseInt(priceAfterDiscount);

        document.getElementById("tax").innerHTML = parseInt(taxAmount);

        let paidAmount = totalAmount;

        document.getElementById("paid").innerHTML = parseInt(paidAmount);
      }

      function calculate() {
        price = document.getElementById("prc").value;
        quantity = document.getElementById("qty").value;
        amount = quantity * price;
        document.getElementById("amnt").value = parseInt(amount);

        total = total + amount;
        originalPrice = total;
        // document.getElementById("total").innerHTML = parseInt(originalPrice);

        discountAmount = originalPrice * discount;
        // document.getElementById("discount").innerHTML =
          // parseInt(discountAmount);

        priceAfterDiscount = originalPrice - discountAmount;
        // document.getElementById("afterDiscount").innerHTML =
        //   parseInt(priceAfterDiscount);

        taxAmount = priceAfterDiscount * taxRate;
        // document.getElementById("tax").innerHTML = parseInt(taxAmount);

        totalAmount = priceAfterDiscount + taxAmount;

        // let paidAmount = totalAmount;

        //  paidAmount -= 20; // for example, a $20 credit

        // document.getElementById("paid").innerHTML = parseInt(paidAmount);
      }

      var index,
        table = document.getElementById("tab"),
        rIndex;

      function edit() {
        //   access to form
        for (var i = 1; i < table.rows.length; i++) {
          table.rows[i].onclick = function () {
            rIndex = this.rowIndex;
            console.log(rIndex);

            document.getElementById("list").value = this.cells[0].innerHTML;
            document.getElementById("prc").value = this.cells[1].innerHTML;
            document.getElementById("qty").value = this.cells[2].innerHTML;
            document.getElementById("amnt").value = this.cells[3].innerHTML;
          };
        }
      }

      function del() {
        //delete
        for (var i = 1; i < table.rows.length; i++) {
          table.rows[i].onclick = function () {
            var c = confirm("Are you sure you want to delete this product?");
            if (c == true) {
              rIndex = this.remove();

              total = total - amount;
              originalPrice = total;
              document.getElementById("total").innerHTML =
                parseInt(originalPrice);

              discountAmount = originalPrice * discount;
              document.getElementById("discount").innerHTML = parseInt(discountAmount) ;

              priceAfterDiscount = originalPrice - discountAmount;
              document.getElementById("afterDiscount").innerHTML =parseInt(priceAfterDiscount) ;

              taxAmount = priceAfterDiscount * taxRate;
              document.getElementById("tax").innerHTML = parseInt(taxAmount) ;

              totalAmount = priceAfterDiscount + taxAmount;

              let paidAmount = totalAmount;

              //  paidAmount -= 20; // for example, a $20 credit

              document.getElementById("paid").innerHTML =parseInt(paidAmount) ;
            }
          };
        }
      }

      function updateData() {
        table.rows[rIndex].cells[0].innerHTML =
          document.getElementById("list").value;
        table.rows[rIndex].cells[1].innerHTML =
          document.getElementById("prc").value;
        table.rows[rIndex].cells[2].innerHTML =
          document.getElementById("qty").value;
        table.rows[rIndex].cells[3].innerHTML =
          document.getElementById("amnt").value;

        document.getElementById("list").value = "";
        document.getElementById("prc").value = "";
        document.getElementById("qty").value = "";
        document.getElementById("amnt").value = "";

        document.getElementById("total").innerHTML = parseInt(originalPrice);

        document.getElementById("discount").innerHTML =
          parseInt(discountAmount);

        document.getElementById("afterDiscount").innerHTML =
          parseInt(priceAfterDiscount);

        document.getElementById("tax").innerHTML = parseInt(taxAmount);

        let paidAmount = totalAmount;

        document.getElementById("paid").innerHTML = parseInt(paidAmount);
      }
    </script>
    <script>
      // Example starter JavaScript for disabling form submissions if there are invalid fields
      (function () {
        "use strict";

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll(".needs-validation");

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms).forEach(function (form) {
          form.addEventListener(
            "submit",
            function (event) {
              if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
              }

              form.classList.add("was-validated");
            },
            false
          );
        });
      })();
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
